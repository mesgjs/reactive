{"version":3,"file":"reactive.min.umd.js","sources":["../src/reactive.esm.js"],"sourcesContent":["/*\n * reactive\n * A reactive value library supporting memoization and per-value\n * selection of lazy or eager, chain-less dependency evaluation.\n *\n * Copyright 2023-2025 by Kappa Computer Solutions, LLC and Brian Katzung\n * Author: Brian Katzung <briank@kappacs.com>\n */\n\n// Return a new reactive value object\nfunction reactive (opts = {}) {\n    const r = Object.setPrototypeOf({\n\t_v: opts.v,\t\t\t// Current value\n\t_cmp: opts.compare,\t\t// Comparison function/value\n\t_rdy: true,\t\t\t// Ready?\n\t_eager: opts.eager,\t\t// Eager function eval\n\t_pros: new Set(),\t\t// Providers\n\t_cons: new Set(),\t\t// Consumers\n\t// _busy: true/undefined,\t// Currently evaluating definition\n\t// _def: undefined,\t\t// Reactive definition/memo/effect\n\t// _g: undefined,\t\t// Getter function\n\t// _rov: undefined,\t\t// Read-only view\n\t// _sched: undefined,\t\t// Eval queue if scheduled\n\t// _s: undefined,\t\t// Setter function\n\n    }, reactive._prototype);\n\n    if (opts.compare === undefined) r._cmp = r._defcmp;\n    if (opts.def) r.def = opts.def;\n\n    return r;\n}\n\n(r => {\n    r._roPrototype = {\n\tget $reactive () { return r.type; },\n\tget readonly () { return true; },\n\tget rv () { return this.getter(); },\n\ttoString () { return this.getter().toString(); },\n\tvalueOf () { return this.getter(); },\n    };\n    r._prototype = Object.setPrototypeOf({\n\t/* PUBLIC ATTRIBUTES */\n\tget accessors () { return [this.getter, this.setter]; },\n\tget compare () { return this._cmp; },\n\tget def () { return this._def; },\n\tset def (d) {\t\t\t// Set/change/clear definition\n\t    if (d === undefined) {\t// Clear\n\t\tif (this._def) {\n\t\t    this.provider(null);\n\t\t    delete this._def;\n\t\t    this._setNotify(undefined);\n\t\t}\n\t    } else if (typeof d === 'function') {\n\t\t// Set/change\n\t\tthis.provider(null);\n\t\tthis._def = d;\n\t\tdelete this._error;\n\t\tthis._rdy = false;\n\t\tthis._schedule();\n\t    } else if (d?.$reactive === r.type) {\n\t\t// Clone a reactive value using its getter function\n\t\tthis.def = d.getter;\n\t    }\n\t},\n\tget eager () { return this._eager; },\n\tset eager (e) {\t\t\t// Change def eval eagerness\n\t    this._eager = e;\n\t    this._schedule();\n\t},\n\tget error () { return this._error; },\n\tget getter () {\t\t\t// Return getter function\n\t    return (this._g ||= () => this.rv);\n\t},\n\t// Return [getter, setter] pair\n\tget $reactive () { return r.type; },\n\tget readonly () { return false; },\n\tget readonlyView () {\t\t// Get read-only view\n\t    if (!this._rov) {\n\t\tthis._rov = Object.freeze(Object.setPrototypeOf({\n\t\t    get error () { return this._error; },\n\t\t    getter: this.getter,\n\t\t}, r._roPrototype));\n\t    }\n\t    return this._rov;\n\t},\n\tget rv () {\t\t\t// Current value (readable)\n\t    if (this._sched !== undefined) {\n\t\t// Remove from scheduled evaluation queue\n\t\tr._REQ[this._sched].delete(this);\n\t\tdelete this._sched;\n\t    }\n\t    if (r._consumer && !r._untrack) {\n\t\t// Producer-consumer tracking\n\t\tthis.consumer(r._consumer);\n\t\tr._consumer.provider(this);\n\t    }\n\t    if (!this._checkReady()) {\t// Recompute defined value?\n\t\t// Croak if trying to recursively reference our reactive\n\t\t// in order to define our value\n\t\tif (this._busy) throw new ReferenceError('Self-referential reactive definition');\n\t\t// Providers can change every iteration; start fresh\n\t\tthis.provider(null);\n\t\tconst pc = r._consumer;\t// Save previous consumer\n\t\tr._consumer = this;\t// We're the consumer now\n\t\tthis._busy = true;\t// For recursive def detection\n\t\t\t\t\t// Evaluate definition\n\t\ttry {\n\t\t    delete this._error;\n\t\t    const res = this._def(this._v);\n\t\t    delete this._busy;\n\t\t    r._consumer = pc;\t// Restore previous consumer\n\t\t    this._setNotify(res);\n\t\t} catch (e) {\t\t// Try to clean up, unwind on error\n\t\t    delete this._busy;\n\t\t    r._consumer = pc;\n\t\t    this._error = e;\n\t\t    this._rdy = true;\t// The error is our new result\n\t\t    this.ripple();\n\t\t    if (this._eager && !this._cons.size) {\n\t\t\t// In space, no one can hear you scream\n\t\t\tqueueMicrotask(() => { throw new Error(`[Reactive] ${e.message}`, { cause: [ e, this ] }); });\n\t\t    }\n\t\t    throw e;\n\t\t}\n\t    }\n\t    if (this._error) throw this._error;\n\t    return this._v;\n\t},\n\tget setter () {\t\t\t// Return setter function\n\t    return (this._s ||= vvf => this._set(vvf));\n\t},\n\tget wv () { return this.rv; },\t// Writable value\n\tset wv (v) {\n\t    // Setting a static value clears any existing definition.\n\t    // Unlike the setter function, a functional v is not special.\n\t    if (this._def) this.def = undefined;\n\t    this._setNotify(v);\n\t},\n\t/* PUBLIC METHODS */\n\tconsumer (c, add = true) {\t// Add/remove consumer\n\t    if (add) this._cons.add(c);\n\t    else this._cons.delete(c);\n\t},\n\tprovider (p, add = true) {\t// Add/remove/remove all provider(s)\n\t    if (p === null) {\n\t\t// Unsub from, and clear, all current providers\n\t\tfor (const cp of this._pros) cp.consumer(this, false);\n\t\tthis._pros.clear();\n\t    }\n\t    else if (add) this._pros.add(p);\n\t    else this._pros.delete(p);\n\t},\n\t// Ripple ready-state changes through consumers\n\tripple (dis = 0) {\n\t    // Distance 0: our value changed\n\t    // Distance 1: an adjacent value changed\n\t    // Distance >1: a more distant value changed; our recalc may or\n\t    //   may not be required depending on intermediate results\n\t    const wasReady = this._rdy;\n\t    if (dis === 1) this._rdy = false;\n\t    if (dis > 1 && this._rdy) this._rdy = undefined;\n\t    // Ripple if local or transitioning from ready\n\t    if (!dis || (wasReady && !this._rdy)) {\n\t\t++r._evalWait;\n\t\tconst nxt = dis + 1;\n\t\tfor (const con of this._cons) con.ripple(nxt);\n\t\t--r._evalWait;\n\t    }\n\t    this._schedule(dis);\t// Call me, maybe!\n\t},\n\tset (vvf) {\t\t\t// Chainable set\n\t    // e.g. .setEager(0).set(v0).setDef(v => f(v)).setEager(1)\n\t    // Accepts a value or a mapping function (like setter(vvf)).\n\t    this._set(vvf);\n\t    return this;\n\t},\n\t// Set value; ripple-notify consumers of changes\n\tsetDef (d) {\t\t\t// Set def (chainable)\n\t    this.def = d;\n\t    return this;\n\t},\n\tsetEager (e) {\t\t\t// Set eager (chainable)\n\t    this.eager = e;\n\t    return this;\n\t},\n\tunready () {\t\t\t// Force unready\n\t    if (this._def) this._rdy = false;\n\t    this._schedule();\n\t    return this;\n\t},\n\t/* PRIVATE METHODS */\n\t_checkReady () {\t\t// Determine boolean readiness\n\t    if (this._rdy !== undefined) return this._rdy;\n\t    /*\n\t     * When the readiness is undefined, check providers for ripple\n\t     * changes. If any provider has changed, we must recalculate too.\n\t     */\n\t    for (const pro of this._pros) {\n\t\t// Provider changes will be rippled to us (d=1)\n\t\tpro.rv;\n\t\tif (this._rdy === false) return false;\n\t    }\n\t    /*\n\t     * No providers rippled a change to us during (recursive)\n\t     * dependency checking, so we're actually still ready!\n\t     */\n\t    return (this._rdy = true);\n\t},\n\t_defcmp (a, b) { return a !== b; },// Default comparison function\n\t_schedule (dis = 0) {\t\t// Schedule for eval if needed\n\t    if (!this._rdy && this._sched === undefined && (this._eager || this._cons.size)) r._queueEval(this, dis);\n\t    r.run();\n\t},\n\t_set (vvf) {\t\t\t// Prototype setter\n\t    // Setting a static value clears any existing definition.\n\t    // Accepts a value or an old-to-new-value mapping function.\n\t    if (this._def) this.def = undefined;\n\t    if (typeof vvf === 'function') this._setNotify(vvf(this._v));\n\t    else this._setNotify(vvf);\n\t    return this._v;\n\t},\n\t_setNotify (v) {\n\t    const chg = (typeof this._cmp === 'function') ? this._cmp(this._v, v) : this._cmp;\n\t    this._v = v;\n\t    this._rdy = true;\n\t    delete this._error;\n\t    if (chg) this.ripple();\n\t},\n    }, r._roPrototype);\n\n    // Yielding recalculation queue runner\n    async function runner () {\n\tif (!r._evalWait) {\n\t    ++r._evalWait;\n\t    const [ q0, q1, q2 ] = r._REQ;\n\t    const runFirst = q => { try { q.values().next().value.rv; } catch (_err) {/**/} };\n\t    let lastYield = performance.now();\n\t    const cede = async () => {\n\t\tif (performance.now() - lastYield >= r.sliceTime) {\n\t\t    await new Promise(r => setTimeout(r, 0));\n\t\t    lastYield = performance.now();\n\t\t}\n\t    };\n\t    /*\n\t     * NB: .rv exceptions will be rethrown to consumers; we\n\t     * deliberately ignore them and process the rest of the graph.\n\t     * Abort if evalWait goes up (running a batch).\n\t     */\n\t    while (r._evalWait < 2) {\n\t\tfor (const ro of q0) {\n\t\t    if (r._evalWait < 2) try { ro.rv; } catch (_err) {/**/} finally { await cede(); }\n\t\t    else break;\n\t\t}\n\t\tif (r._evalWait > 1) break;\n\t\telse if (q1.size) runFirst(q1);\n\t\telse if (q2.size) runFirst(q2);\n\t\telse break;\t\t// All queues empty\n\t\tawait cede();\n\t    }\n\t    --r._evalWait;\n\t}\n    }\n\n    Object.assign(r, {\n\t_evalWait: 0,\t\t\t// Suspend evaluation\n\tsliceTime: 5,\t\t\t// Slice yield threshold (ms)\n\t_tasks: [],\t\t\t// Run-queue tasks\n\t_untrack: 0,\t\t\t// Suspend tracking\n\t// Reactive evaluation queues\n\t_REQ: [ new Set(), new Set(), new Set() ],\n\t/* PUBLIC METHODS */\n\tbatch (cb) {\t\t\t// Execute callback as a batch\n\t    ++r._evalWait;\n\t    const res = cb();\n\t    --r._evalWait;\n\t    r.run();\n\t    return res;\n\t},\n\tfv (v, bfv = false) {\t// Final value in possibly-reactive chain\n\t    while (v?.$reactive === reactive.type) v = v.rv;\n\t    return ((bfv && typeof v?._bundle === 'function') ? v._bundle() : v);\n\t},\n\trun () {\t\t\t// Run the eval queues (maybe)\n\t    if (!r._evalWait) setTimeout(runner, 0);\n\t},\n\tget type () { return 1; },\t// Type 1: basic direct\n\ttypeOf (v) { return v?.$reactive; },// Reactive type, if any\n\tuntracked (cb) {\t\t// Execute callback untracked\n\t    ++r._untrack;\n\t    const res = cb();\n\t    --r._untrack;\n\t    return res;\n\t},\n\t/* PRIVATE METHODS */\n\t_queueEval (ro, dis = 0) {\t// Queue reactive evaluation\n\t    dis = Math.min(dis, 2);\n\t    if (typeof ro._sched === 'number') {\n\t\tif (ro._sched <= dis) return;\n\t\tr._REQ[ro._sched].delete(ro);\n\t    }\n\t    r._REQ[ro._sched = dis].add(ro);\n\t},\n    });\n})(reactive);\n\nexport { reactive, reactive as default };\nexport const { batch, fv, run, typeOf, untracked } = reactive;\n\n// END\n"],"names":["reactive","opts","r","Object","setPrototypeOf","_v","v","_cmp","compare","_rdy","_eager","eager","_pros","Set","_cons","_prototype","undefined","_defcmp","def","async","runner","_evalWait","q0","q1","q2","_REQ","runFirst","q","values","next","value","rv","_err","lastYield","performance","now","cede","sliceTime","Promise","setTimeout","ro","size","_roPrototype","$reactive","type","readonly","this","getter","toString","valueOf","accessors","setter","_def","d","provider","_setNotify","_error","_schedule","e","error","_g","readonlyView","_rov","freeze","_sched","delete","_consumer","_untrack","consumer","_checkReady","_busy","ReferenceError","pc","res","ripple","queueMicrotask","Error","message","cause","_s","vvf","_set","wv","c","add","p","cp","clear","dis","wasReady","nxt","con","set","setDef","setEager","unready","pro","a","b","_queueEval","run","chg","assign","_tasks","batch","cb","fv","bfv","_bundle","typeOf","untracked","Math","min"],"mappings":"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"}